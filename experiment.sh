#!/usr/bin/env bash
set -euo pipefail
IFS=$'\n\t'

echo " ▗▄▄▖▗▖  ▗▖▗▖  ▗▖▗▖  ▗▖▗▄▄▄▖▗▄▄▄▖▗▄▄▖▗▖  ▗▖        ▗▄▄▄▖▗▖  ▗▖▗▄▄▖ ▗▄▄▄▖▗▄▄▖ ▗▄▄▄▖▗▖  ▗▖▗▄▄▄▖▗▖  ▗▖▗▄▄▄▖"
echo "▐▌    ▝▚▞▘ ▐▛▚▞▜▌▐▛▚▞▜▌▐▌     █  ▐▌ ▐▌▝▚▞▘         ▐▌    ▝▚▞▘ ▐▌ ▐▌▐▌   ▐▌ ▐▌  █  ▐▛▚▞▜▌▐▌   ▐▛▚▖▐▌  █  "
echo " ▝▀▚▖  ▐▌  ▐▌  ▐▌▐▌  ▐▌▐▛▀▀▘  █  ▐▛▀▚▖ ▐▌          ▐▛▀▀▘  ▐▌  ▐▛▀▘ ▐▛▀▀▘▐▛▀▚▖  █  ▐▌  ▐▌▐▛▀▀▘▐▌ ▝▜▌  █  "
echo "▗▄▄▞▘  ▐▌  ▐▌  ▐▌▐▌  ▐▌▐▙▄▄▖  █  ▐▌ ▐▌ ▐▌          ▐▙▄▄▖▗▞▘▝▚▖▐▌   ▐▙▄▄▖▐▌ ▐▌▗▄█▄▖▐▌  ▐▌▐▙▄▄▖▐▌  ▐▌  █  "
echo "                                                                                            by fcomovaz "

# ----------------------------------------------------------------
# Variable config
# ----------------------------------------------------------------
STAGE=3
EPOCHS=10
EMB_START=0
EMB_END=11
SCRIPT="run.py"

# ----------------------------------------------------------------
# Activating virtual environment
# ----------------------------------------------------------------
VENV_PATH="/home/fcomovaz/envs/ml/bin/activate"  # <- to change
source "${VENV_PATH}"

# ----------------------------------------------------------------
# Bucle de embeddings
# ----------------------------------------------------------------
for EMB in $(seq "${EMB_START}" "${EMB_END}"); do
  echo "Executing embedding=${EMB} (stage=${STAGE})"
  python "${SCRIPT}" --stage "${STAGE}" --embedding "${EMB}" --epochs "${EPOCHS}"
done


echo " ▗▄▄▖ ▗▄▖ ▗▖  ▗▖▗▄▄▖ ▗▖   ▗▄▄▄▖▗▄▄▄▖▗▄▄▄▖▗▄▄▄  "
echo "▐▌   ▐▌ ▐▌▐▛▚▞▜▌▐▌ ▐▌▐▌   ▐▌     █  ▐▌   ▐▌  █ "
echo "▐▌   ▐▌ ▐▌▐▌  ▐▌▐▛▀▘ ▐▌   ▐▛▀▀▘  █  ▐▛▀▀▘▐▌  █ "
echo "▝▚▄▄▖▝▚▄▞▘▐▌  ▐▌▐▌   ▐▙▄▄▖▐▙▄▄▖  █  ▐▙▄▄▖▐▙▄▄▀ "